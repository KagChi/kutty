!function(){"use strict";const t=(()=>{const t=27,e=35,i=36,s=38,o=40;class r{constructor(t){this.trigger=t.trigger,this.dropdown=t.dropdownList,this.items=this.dropdown.querySelectorAll(".dropdown-item"),this.links=this.dropdown.querySelectorAll("a.dropdown-item"),[this.firstLink]=this.links,this.lastLink=this.links[this.links.length-1],this.state=[],this.currentFocusedIndex=0,this.isOpen=!1,this.open=this.open.bind(this),this.toggle=this.toggle.bind(this),this.onClick=this.onClick.bind(this),this.onFocus=this.onFocus.bind(this),this.onKeydown=this.onKeydown.bind(this)}onClick(t){t.target.closest(".dropdown-trigger")!==this.trigger.closest(".dropdown-trigger")&&this.close(),t&&t.target.focus()}onFocus(t){this.state.forEach((e,i)=>{t.target===e.link&&(this.currentFocusedIndex=i)})}setFocus(t){switch(t.preventDefault(),t.target===this.trigger&&(this.currentFocusedIndex=0),t.which){case s:this.state[this.currentFocusedIndex].prevLink.focus();break;case i:this.firstLink.focus();break;case e:this.lastLink.focus();break;case o:t.target!==this.trigger?this.state[this.currentFocusedIndex].nextLink.focus():this.firstLink.focus()}}onKeydown(r){switch(r.which){case t:this.close(r);break;case s:case o:case i:case e:this.setFocus(r)}}addAttributes(){this.trigger.setAttribute("aria-haspopup",!0),this.trigger.setAttribute("aria-controls",this.dropdown.id),this.dropdown.setAttribute("role","menu"),this.dropdown.setAttribute("aria-labelledby",this.trigger.id),this.dropdown.setAttribute("tabindex",-1),this.dropdown.setAttribute("aria-hidden",!this.isOpen),this.state.forEach(t=>{t.item&&t.item.setAttribute("role","none"),t.link.setAttribute("role","menuitem"),t.link.setAttribute("tabindex",-1)})}removeAttributes(){this.trigger.removeAttribute("aria-haspopup"),this.trigger.removeAttribute("aria-controls"),this.trigger.removeAttribute("aria-expanded"),this.dropdown.removeAttribute("role"),this.dropdown.removeAttribute("aria-labelledby"),this.dropdown.removeAttribute("tabindex"),this.dropdown.removeAttribute("aria-hidden"),this.state.forEach(t=>{t.item&&t.item.removeAttribute("role"),t.link.removeAttribute("role"),t.link.removeAttribute("tabindex")})}addEventListeners(){event&&this.trigger.focus(),document.addEventListener("click",this.onClick),this.trigger.addEventListener("keydown",this.onKeydown),this.dropdown.addEventListener("keydown",this.onKeydown),this.links.forEach(t=>{t.addEventListener("focus",this.onFocus)})}removeEventListeners(){document.removeEventListener("click",this.onClick),this.trigger.removeEventListener("keydown",this.onKeydown),this.dropdown.removeEventListener("keydown",this.onKeydown),this.links.forEach(t=>{t.removeEventListener("focus",this.onFocus)})}open(){this.isOpen=!0,this.trigger.setAttribute("aria-expanded",!0),this.dropdown.setAttribute("aria-hidden",!1),setTimeout(()=>this.dropdown.classList.add("dropdown-animation"),1),this.addEventListeners()}close(t){this.isOpen=!1,this.dropdown.classList.remove("dropdown-animation"),this.trigger.setAttribute("aria-expanded",!1),setTimeout(()=>this.dropdown.setAttribute("aria-hidden",!0),100),this.removeEventListeners(),this.trigger.focus()}toggle(t){t.preventDefault(),this.isOpen=!this.isOpen,this.isOpen?this.open():this.close()}destroy(){this.removeAttributes(),this.removeEventListeners(),this.trigger.removeEventListener("click",this.toggle)}render(){this.links.forEach((t,e)=>{this.state.push({item:this.items[e],link:t,prevLink:this.links[e-1]||this.lastLink,nextLink:this.links[e+1]||this.firstLink})}),this.addAttributes(),this.trigger.addEventListener("click",this.toggle)}}return{init:()=>{const t=document.querySelectorAll(".dropdown"),e={};t.forEach(t=>{e.trigger=t.querySelector(".dropdown-trigger"),e.dropdownList=t.querySelector(".dropdown-list");new r(e).render()})}}})(),e=(()=>{const t=Symbol("onClick"),e=Symbol("onKeydown"),i=Symbol("addEventDelegation"),s=Symbol("addEventListeners"),o=Symbol("removeEventListeners"),r=Symbol("addAttributes"),n=Symbol("removeAttributes"),d=Symbol("setAttributes"),h=Symbol("setFocusableElements"),a=Symbol("setFocus"),l=Symbol("restoreFocus"),c=Symbol("switchFocus"),u=Symbol("maintainFocus"),g=Symbol("addObserver"),b=Symbol("removeObserver"),m=['[href]:not([tabindex^="-"])','input:not([disabled]):not([type="hidden"]):not([tabindex^="-"]):not([type="radio"])','input[type="radio"]:checked','select:not([disabled]):not([tabindex^="-"])','textarea:not([disabled]):not([tabindex^="-"])','button:not([disabled]):not([tabindex^="-"])','[tabindex]:not([tabindex^="-"])','[contenteditable="true"]:not([tabindex^="-"])'],p="Escape",v="Tab",y="F6";function f(t,e){let i=t;for(;i!==e&&i;)i=i.parentNode;return!!i}class w{constructor(s,{onOpen:o=(()=>{}),onClose:r=(()=>{}),describedby:n,isModal:d=!0,isOpen:a=!1,isCreated:l=!0,disableScroll:u=!0}={}){document.querySelector(".dialog")?(this.config={onOpen:o,onClose:r,describedby:n,isModal:d,isCreated:l,isOpen:a,disableScroll:u},this.dialog=s.dialogContainer,this.openingTrigger=s.trigger,this.backdropTrigger=s.dialogContainer,this.dialogArea=".dialog, .dialog-open",this.document=document.querySelector("html"),this.documentIsAlreadyDisabled=!1,this.focusableElements=[],this.firstFocusableElement=null,this.lastFocusableElement=null,this.scrollbarWidth=function(){const t=document.createElement("div");t.className="scrollbar-measure",document.body.appendChild(t);const e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e}(),this.isCreated=!1,this.isOpen=!1,this.close=this.close.bind(this),this.toggle=this.toggle.bind(this),this[t]=this[t].bind(this),this[e]=this[e].bind(this),this[i]=this[i].bind(this),this[c]=this[c].bind(this),this.observer=new MutationObserver(t=>t.forEach(()=>this[h]())),this.isInitialized=!0):this.isInitialized=!1}[t](t){t.target.closest(this.dialogArea)||this.close(t),t.target===this.backdropTrigger&&this.close(t)}[e](t){switch(t.key){case p:t.stopPropagation(),this.close(t);break;case y:this.config.isModal||this[l]();break;case v:this[u](t)}}[i](t){f(t.target,this.openingTrigger)&&this.toggle(t),document.querySelectorAll(".dialog-close").forEach(e=>{f(t.target,e)&&this.close()})}[s](){document.addEventListener("click",this[t],{capture:!0}),this.dialog.addEventListener("keydown",this[e])}[o](){document.removeEventListener("click",this[t],{capture:!0}),this.dialog.removeEventListener("keydown",this[e]),this.openingTrigger&&this.openingTrigger.removeEventListener("keydown",this[c])}[r](){this.dialog.setAttribute("role","dialog"),this.dialog.setAttribute("tabindex",-1),this.dialog.setAttribute("aria-modal",!0),this.dialog.setAttribute("aria-hidden",!0),this.dialog.setAttribute("aria-labelledby","dialog-title"),this.config.describedby&&this.dialog.setAttribute("aria-describedby",this.config.describedby),this.openingTrigger.setAttribute("aria-haspopup","dialog")}[n](){this.dialog.removeAttribute("role"),this.dialog.removeAttribute("tabindex"),this.dialog.removeAttribute("aria-modal"),this.dialog.removeAttribute("aria-hidden"),this.dialog.removeAttribute("aria-labelledby"),this.dialog.removeAttribute("aria-describedby"),this.config.disableScroll&&this.isOpen&&!this.documentIsAlreadyDisabled&&(this.document.classList.remove("overflow-hidden"),document.body.removeAttribute("style")),this.openingTrigger.removeAttribute("aria-haspopup")}[d](){this.dialog.setAttribute("aria-hidden",!this.isOpen),this.config.disableScroll&&!this.documentIsAlreadyDisabled&&(this.isOpen?(this.document.classList.add("overflow-hidden"),document.body.style.paddingRight=this.scrollbarWidth+"px"):(this.document.classList.remove("overflow-hidden"),document.body.removeAttribute("style")))}[h](){const t=function(t){const e=[];return t.forEach(t=>{const i=t.getBoundingClientRect();(i.width>0||i.height>0)&&e.push(t)}),e}(this.dialog.querySelectorAll(m)),e=function(t,e,i){const s=t.querySelectorAll(e),o=[];let r=!1;return 0===s.length?i:(i.forEach(t=>{s.forEach(e=>{e.contains(t)&&(r=!0)}),r||o.push(t),r=!1}),o)}(this.dialog,'[role="dialog"]',t);this.focusableElements=e.length>0?e:[this.dialog],[this.firstFocusableElement]=this.focusableElements,this.lastFocusableElement=this.focusableElements[this.focusableElements.length-1]}[a](){this.firstFocusableElement.focus()}[l](){this.openingTrigger.focus(),this.isOpen&&this.openingTrigger.addEventListener("keydown",this[c])}[c](t){t.key===y&&(this.openingTrigger.removeEventListener("keydown",this[c]),this[a]())}[u](t){t.shiftKey&&t.target===this.firstFocusableElement&&(t.preventDefault(),this.lastFocusableElement.focus()),t.shiftKey||t.target!==this.lastFocusableElement||(t.preventDefault(),this.firstFocusableElement.focus())}[g](){this.observer.observe(this.dialog,{childList:!0,attributes:!0,subtree:!0})}[b](){this.observer.disconnect()}open(){this.isInitialized&&this.isCreated&&!this.isOpen&&(this.isOpen=!0,this.documentIsAlreadyDisabled=this.document.classList.contains("overflow-hidden"),this[d](),this[s](),this[a](),setTimeout(()=>this.dialog.classList.add("dialog-animation"),1),this.config.onOpen(this.dialog,this.openingTrigger))}close(t){this.isInitialized&&this.isCreated&&this.isOpen&&(this.isOpen=!1,t&&t.preventDefault(),this.dialog.classList.remove("dialog-animation"),setTimeout(()=>this[d](),100),this[o](),this.openingTrigger&&this[l](),this.config.onClose(this.dialog,this.openingTrigger))}toggle(t){this.isInitialized&&this.isCreated&&(t&&t.preventDefault(),this.isOpen?this.close():this.open())}create(){this.isInitialized&&!this.isCreated&&(this.isCreated=!0,this[r](),this[h](),this[g](),document.addEventListener("click",this[i],{capture:!0}))}destroy(){this.isInitialized&&this.isCreated&&(this.close(),this.isCreated=!1,this[n](),this[o](),this[b](),document.removeEventListener("click",this[i],{capture:!0}))}}return{init:()=>{const t=document.querySelectorAll(".dialog-open"),e={};t.forEach(t=>{e.trigger=t,e.dialogContainer=document.querySelector(t.dataset.dialog);new w(e).create()})}}})();document.addEventListener("DOMContentLoaded",()=>{t.init(),e.init()})}();
